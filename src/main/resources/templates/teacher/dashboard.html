<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teacher Dashboard - Academic Information System</title>
    <link rel="stylesheet" th:href="@{/css/teacher-style.css}">
</head>
<body>
<!-- Navigation Bar -->
<nav class="navbar" role="navigation" aria-label="Main navigation">
    <div class="navbar-content">
        <a href="/teacher/dashboard" class="navbar-brand">Academic Information System</a>
        <div class="navbar-right">
            <div class="nav-links">
                <a href="/teacher/dashboard">Dashboard</a>
                <a href="/teacher/grades">Manage Grades</a>
            </div>
            <div class="user-info">
                <div class="user-icon">
                    <span th:text="${#strings.substring(currentUser, 0, 1)}">T</span>
                </div>
                <span class="user-name" th:text="${currentUser}">Teacher</span>
            </div>
            <a href="/logout" class="btn-logout">Logout</a>
        </div>
    </div>
</nav>

<!-- Main Content -->
<main class="container">
    <!-- Welcome Card -->
    <section class="welcome-card">
        <h2>Welcome back, <span th:text="${currentUser}">Teacher</span></h2>
        <p>Manage your subjects and student grades from your dashboard.</p>
    </section>

    <!-- Statistics -->
    <section class="stats-grid" aria-label="Teaching statistics">
        <article class="stat-card">
            <div class="stat-header">
                <div class="stat-label">My Subjects</div>
                <div class="stat-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                    </svg>
                </div>
            </div>
            <div class="stat-value" th:text="${stats.totalSubjects}">0</div>
        </article>

        <article class="stat-card">
            <div class="stat-header">
                <div class="stat-label">Total Students</div>
                <div class="stat-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"/>
                    </svg>
                </div>
            </div>
            <div class="stat-value" th:text="${stats.totalStudents}">0</div>
        </article>

        <article class="stat-card">
            <div class="stat-header">
                <div class="stat-label">Grades Assigned</div>
                <div class="stat-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/>
                    </svg>
                </div>
            </div>
            <div class="stat-value" th:text="${stats.totalGrades}">0</div>
        </article>

        <article class="stat-card">
            <div class="stat-header">
                <div class="stat-label">Average Grade</div>
                <div class="stat-icon">
                    <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                        <path d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                </div>
            </div>
            <div class="stat-value" th:text="${stats.averageGrade != null ? #numbers.formatDecimal(stats.averageGrade, 1, 2) : '0.0'}">0.0</div>
        </article>
    </section>

    <!-- My Subjects -->
    <section class="subjects-section">
        <h2>My Subjects</h2>

        <div th:if="${subjects != null && !subjects.isEmpty()}">
            <article th:each="subject : ${subjects}" class="subject-card">
                <div class="subject-header">
                    <div class="subject-name" th:text="${subject.subject.subjectName}">Object-Oriented Programming</div>
                    <div class="subject-code" th:text="${subject.subject.subjectCode}">CS201-G1</div>
                </div>
                <div class="subject-info">
                    <div class="subject-info-item">
                        <span>Group:</span>
                        <strong th:text="${subject.group != null ? subject.group.groupName : 'Not assigned'}">CS-2024-1</strong>
                    </div>
                    <div class="subject-info-item">
                        <span>Credits:</span>
                        <strong th:text="${subject.subject.credits}">6</strong>
                    </div>
                    <div class="subject-info-item">
                        <span>Year:</span>
                        <strong th:text="${subject.academicYear}">2024/2025</strong>
                    </div>
                    <div class="subject-info-item">
                        <span>Semester:</span>
                        <strong th:text="${subject.semester}">Fall</strong>
                    </div>
                </div>
                <a th:href="@{/teacher/grades(assignmentId=${subject.assignmentId})}" class="btn btn-primary">
                    Manage Grades
                </a>
            </article>
        </div>

        <div th:if="${subjects == null || subjects.isEmpty()}" class="no-subjects">
            <div class="no-subjects-icon">
                <svg width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
            </div>
            <h3>No Subjects Assigned</h3>
            <p>You haven't been assigned to any subjects yet. Please contact the administrator.</p>
        </div>
    </section>
</main>
</body>
</html>